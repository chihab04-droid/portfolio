<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prospection Marketing - Entreprise</title>
    <!-- TailwindCSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome pour les icônes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Styles personnalisés pour les animations et effets marketing */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .marketing-gradient {
            background: linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 50%, #45b7d1 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse-icon {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .card-shine {
            position: relative;
            overflow: hidden;
        }
        
        .card-shine::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .card-shine:hover::before {
            left: 100%;
        }
        
        .priority-high { border-left: 4px solid #ef4444; }
        .priority-medium { border-left: 4px solid #f59e0b; }
        .priority-low { border-left: 4px solid #10b981; }
        
        .status-sent { background-color: #d1fae5; color: #065f46; }
        .status-scheduled { background-color: #dbeafe; color: #1e40af; }
        .status-draft { background-color: #fef3c7; color: #92400e; }
        
        .hidden { display: none !important; }
        
        /* Styles pour les métriques animées */
        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .metric-number {
            font-size: 2rem;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        /* Styles pour les boutons CTA */
        .cta-button {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            transition: all 0.3s ease;
        }
        
        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(238, 90, 36, 0.3);
        }
        
        /* Styles pour les landing pages */
        .landing-preview {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
            background: white;
        }
        
        .theme-blue { background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); }
        .theme-green { background: linear-gradient(135deg, #10b981 0%, #047857 100%); }
        .theme-purple { background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); }
        .theme-red { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
        .theme-orange { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Navigation Bar -->
    <nav class="marketing-gradient text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo/Titre -->
                <div class="flex items-center">
                    <i class="fas fa-rocket text-2xl mr-3 pulse-icon"></i>
                    <h1 class="text-xl font-bold">Prospection Marketing</h1>
                </div>
                
                <!-- Menu Desktop -->
                <div class="hidden md:flex space-x-8">
                    <button onclick="showPage('emails')" class="nav-link hover:text-blue-200 transition-colors duration-200 px-3 py-2 rounded-md">
                        <i class="fas fa-envelope mr-2"></i>Emails
                    </button>
                    <button onclick="showPage('offres')" class="nav-link hover:text-blue-200 transition-colors duration-200 px-3 py-2 rounded-md">
                        <i class="fas fa-tags mr-2"></i>Offres
                    </button>
                    <button onclick="showPage('leads')" class="nav-link hover:text-blue-200 transition-colors duration-200 px-3 py-2 rounded-md">
                        <i class="fas fa-users mr-2"></i>Leads
                    </button>
                    <button onclick="showPage('landing')" class="nav-link hover:text-blue-200 transition-colors duration-200 px-3 py-2 rounded-md">
                        <i class="fas fa-globe mr-2"></i>Landing Pages
                    </button>
                </div>
                
                <!-- Menu Mobile -->
                <div class="md:hidden">
                    <button onclick="toggleMobileMenu()" class="text-white hover:text-blue-200">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
            
            <!-- Menu Mobile Dropdown -->
            <div id="mobile-menu" class="hidden md:hidden pb-4">
                <button onclick="showPage('emails')" class="block w-full text-left px-3 py-2 hover:bg-blue-700 rounded-md">
                    <i class="fas fa-envelope mr-2"></i>Emails
                </button>
                <button onclick="showPage('offres')" class="block w-full text-left px-3 py-2 hover:bg-blue-700 rounded-md">
                    <i class="fas fa-tags mr-2"></i>Offres
                </button>
                <button onclick="showPage('leads')" class="block w-full text-left px-3 py-2 hover:bg-blue-700 rounded-md">
                    <i class="fas fa-users mr-2"></i>Leads
                </button>
                <button onclick="showPage('landing')" class="block w-full text-left px-3 py-2 hover:bg-blue-700 rounded-md">
                    <i class="fas fa-globe mr-2"></i>Landing Pages
                </button>
            </div>
        </div>
    </nav>

    <!-- Bouton d'actions rapides flottant -->
    <div class="fixed bottom-6 right-6 z-40">
        <button onclick="toggleQuickActions()" class="bg-gradient-to-r from-pink-500 to-violet-500 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110">
            <i class="fas fa-plus text-xl"></i>
        </button>
        
        <!-- Menu d'actions rapides -->
        <div id="quick-actions-menu" class="hidden absolute bottom-16 right-0 bg-white rounded-lg shadow-xl p-4 w-48">
            <button onclick="showPage('emails'); hideQuickActions();" class="w-full text-left px-3 py-2 hover:bg-gray-100 rounded-md mb-2">
                <i class="fas fa-envelope mr-2 text-blue-500"></i>Nouvel Email
            </button>
            <button onclick="showPage('offres'); hideQuickActions();" class="w-full text-left px-3 py-2 hover:bg-gray-100 rounded-md mb-2">
                <i class="fas fa-tags mr-2 text-green-500"></i>Nouvelle Offre
            </button>
            <button onclick="showPage('leads'); hideQuickActions();" class="w-full text-left px-3 py-2 hover:bg-gray-100 rounded-md mb-2">
                <i class="fas fa-user-plus mr-2 text-purple-500"></i>Nouveau Lead
            </button>
            <button onclick="showPage('landing'); hideQuickActions();" class="w-full text-left px-3 py-2 hover:bg-gray-100 rounded-md">
                <i class="fas fa-globe mr-2 text-orange-500"></i>Nouvelle Landing
            </button>
        </div>
    </div>

    <!-- Contenu Principal -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Page Emails Automatisés -->
        <div id="emails-page" class="page-content">
            <!-- Hero Section -->
            <div class="text-center mb-12">
                <div class="w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-blue-400 to-purple-600 rounded-full flex items-center justify-center">
                    <i class="fas fa-envelope text-3xl text-white pulse-icon"></i>
                </div>
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Emails Automatisés</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                    Créez et programmez vos campagnes d'emails pour une prospection efficace et automatisée.
                </p>
            </div>

            <!-- Métriques des emails -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="metric-card p-6 rounded-lg text-center">
                    <i class="fas fa-paper-plane text-3xl mb-3"></i>
                    <div class="metric-number" id="emails-sent">0</div>
                    <div class="text-sm opacity-90">Emails Envoyés</div>
                </div>
                <div class="metric-card p-6 rounded-lg text-center">
                    <i class="fas fa-clock text-3xl mb-3"></i>
                    <div class="metric-number" id="emails-scheduled">0</div>
                    <div class="text-sm opacity-90">Programmés</div>
                </div>
                <div class="metric-card p-6 rounded-lg text-center">
                    <i class="fas fa-eye text-3xl mb-3"></i>
                    <div class="metric-number" id="open-rate">0%</div>
                    <div class="text-sm opacity-90">Taux d'Ouverture</div>
                </div>
                <div class="metric-card p-6 rounded-lg text-center">
                    <i class="fas fa-mouse-pointer text-3xl mb-3"></i>
                    <div class="metric-number" id="click-rate">0%</div>
                    <div class="text-sm opacity-90">Taux de Clic</div>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Formulaire d'envoi d'email -->
                <div class="bg-white p-6 rounded-lg shadow-md card-hover card-shine">
                    <h3 class="text-2xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-plus-circle text-blue-600 mr-3"></i>
                        Nouvelle Campagne Email
                    </h3>
                    <form onsubmit="sendEmail(event)">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Objet de l'email</label>
                            <input type="text" id="email-subject" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Type de campagne</label>
                            <select id="email-type" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Sélectionner...</option>
                                <option value="prospection">Prospection</option>
                                <option value="relance">Relance</option>
                                <option value="newsletter">Newsletter</option>
                                <option value="promotion">Promotion</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Destinataires (séparés par des virgules)</label>
                            <textarea id="email-recipients" required rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="email1@example.com, email2@example.com"></textarea>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Contenu de l'email</label>
                            <textarea id="email-content" required rows="6" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Programmation</label>
                            <select id="email-schedule" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="now">Envoyer maintenant</option>
                                <option value="1hour">Dans 1 heure</option>
                                <option value="tomorrow">Demain matin</option>
                                <option value="custom">Programmer pour plus tard</option>
                            </select>
                        </div>
                        <button type="submit" class="w-full cta-button text-white px-4 py-3 rounded-md font-semibold">
                            <i class="fas fa-rocket mr-2"></i>Lancer la Campagne
                        </button>
                    </form>
                </div>
                
                <!-- Liste des emails programmés -->
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <h3 class="text-2xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-list text-green-600 mr-3"></i>
                        Campagnes Récentes
                    </h3>
                    <div id="emails-list" class="space-y-4">
                        <!-- Les emails seront ajoutés ici dynamiquement -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Page Gestion des Offres -->
        <div id="offres-page" class="page-content hidden">
            <!-- Hero Section -->
            <div class="text-center mb-12">
                <div class="w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-green-400 to-blue-600 rounded-full flex items-center justify-center">
                    <i class="fas fa-tags text-3xl text-white pulse-icon"></i>
                </div>
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Gestion des Offres</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                    Créez et gérez vos offres commerciales pour maximiser vos conversions.
                </p>
            </div>

            <div class="flex justify-between items-center mb-8">
                <h3 class="text-2xl font-bold text-gray-900">
                    <i class="fas fa-fire text-orange-500 mr-3"></i>Offres à Pousser
                </h3>
                <button onclick="showAddOffreForm()" class="bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white px-4 py-2 rounded-lg transition-all duration-200">
                    <i class="fas fa-plus mr-2"></i>Nouvelle Offre
                </button>
            </div>
            
            <!-- Formulaire d'ajout d'offre -->
            <div id="add-offre-form" class="hidden bg-white p-6 rounded-lg shadow-md mb-8 card-shine">
                <h4 class="text-xl font-semibold mb-4">Créer une nouvelle offre</h4>
                <form onsubmit="addOffre(event)">
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Titre de l'offre</label>
                            <input type="text" id="offre-titre" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Prix</label>
                            <input type="number" id="offre-prix" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea id="offre-description" required rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"></textarea>
                    </div>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Priorité</label>
                            <select id="offre-priorite" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                                <option value="haute">Haute</option>
                                <option value="moyenne">Moyenne</option>
                                <option value="faible">Faible</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Date d'expiration</label>
                            <input type="date" id="offre-expiration" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        </div>
                    </div>
                    <div class="flex space-x-4">
                        <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md">
                            <i class="fas fa-save mr-2"></i>Créer l'Offre
                        </button>
                        <button type="button" onclick="hideAddOffreForm()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md">
                            <i class="fas fa-times mr-2"></i>Annuler
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- Grille des offres -->
            <div id="offres-list" class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                <!-- Les offres seront ajoutées ici dynamiquement -->
            </div>
        </div>

        <!-- Page Capture de Leads -->
        <div id="leads-page" class="page-content hidden">
            <!-- Hero Section -->
            <div class="text-center mb-12">
                <div class="w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-purple-400 to-pink-600 rounded-full flex items-center justify-center">
                    <i class="fas fa-users text-3xl text-white pulse-icon"></i>
                </div>
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Capture de Leads</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                    Capturez et gérez vos prospects pour développer votre pipeline commercial.
                </p>
            </div>

            <!-- Statistiques des leads -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white p-6 rounded-lg shadow-md text-center">
                    <i class="fas fa-users text-3xl text-purple-600 mb-3"></i>
                    <div class="text-2xl font-bold text-gray-900" id="total-leads">0</div>
                    <div class="text-sm text-gray-600">Total Leads</div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md text-center">
                    <i class="fas fa-calendar text-3xl text-blue-600 mb-3"></i>
                    <div class="text-2xl font-bold text-gray-900" id="leads-this-month">0</div>
                    <div class="text-sm text-gray-600">Ce Mois</div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md text-center">
                    <i class="fas fa-chart-line text-3xl text-green-600 mb-3"></i>
                    <div class="text-2xl font-bold text-gray-900" id="conversion-rate">0%</div>
                    <div class="text-sm text-gray-600">Taux de Conversion</div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md text-center">
                    <i class="fas fa-star text-3xl text-yellow-600 mb-3"></i>
                    <div class="text-2xl font-bold text-gray-900" id="top-source">-</div>
                    <div class="text-sm text-gray-600">Top Source</div>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Formulaire de capture de lead -->
                <div class="bg-white p-6 rounded-lg shadow-md card-hover card-shine">
                    <h3 class="text-2xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-user-plus text-purple-600 mr-3"></i>
                        Nouveau Lead
                    </h3>
                    <form onsubmit="addLead(event)">
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nom complet</label>
                                <input type="text" id="lead-nom" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                <input type="email" id="lead-email" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                        </div>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Téléphone</label>
                                <input type="tel" id="lead-telephone" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Entreprise</label>
                                <input type="text" id="lead-entreprise" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Source</label>
                            <select id="lead-source" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <option value="">Sélectionner...</option>
                                <option value="site-web">Site Web</option>
                                <option value="reseaux-sociaux">Réseaux Sociaux</option>
                                <option value="email">Email Marketing</option>
                                <option value="recommandation">Recommandation</option>
                                <option value="evenement">Événement</option>
                            </select>
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Besoin/Intérêt</label>
                            <textarea id="lead-besoin" required rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"></textarea>
                        </div>
                        <button type="submit" class="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-4 py-3 rounded-md font-semibold transition-all duration-200">
                            <i class="fas fa-plus mr-2"></i>Ajouter le Lead
                        </button>
                    </form>
                </div>
                
                <!-- Liste des leads avec recherche -->
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-semibold flex items-center">
                            <i class="fas fa-list text-green-600 mr-3"></i>
                            Leads Récents
                        </h3>
                    </div>
                    
                    <!-- Barre de recherche et filtres -->
                    <div class="mb-4 space-y-2">
                        <input type="text" id="search-leads" placeholder="Rechercher un lead..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                        <select id="filter-source" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <option value="">Toutes les sources</option>
                            <option value="site-web">Site Web</option>
                            <option value="reseaux-sociaux">Réseaux Sociaux</option>
                            <option value="email">Email Marketing</option>
                            <option value="recommandation">Recommandation</option>
                            <option value="evenement">Événement</option>
                        </select>
                    </div>
                    
                    <div id="leads-list" class="space-y-4 max-h-96 overflow-y-auto">
                        <!-- Les leads seront ajoutés ici dynamiquement -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Page Landing Pages -->
        <div id="landing-page" class="page-content hidden">
            <!-- Hero Section -->
            <div class="text-center mb-12">
                <div class="w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-orange-400 to-red-600 rounded-full flex items-center justify-center">
                    <i class="fas fa-globe text-3xl text-white pulse-icon"></i>
                </div>
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Générateur de Landing Pages</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                    Créez des landing pages performantes pour vos campagnes marketing en quelques clics.
                </p>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Formulaire de création de landing page -->
                <div class="bg-white p-6 rounded-lg shadow-md card-hover card-shine">
                    <h3 class="text-2xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-magic text-orange-600 mr-3"></i>
                        Créer une Landing Page
                    </h3>
                    <form onsubmit="generateLanding(event)">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Titre principal</label>
                            <input type="text" id="landing-title" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500" placeholder="Votre titre accrocheur">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Sous-titre</label>
                            <input type="text" id="landing-subtitle" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500" placeholder="Description courte et percutante">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">URL de l'image</label>
                            <input type="url" id="landing-image" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500" placeholder="https://example.com/image.jpg">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Texte du bouton CTA</label>
                            <input type="text" id="landing-cta" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500" placeholder="Commencer maintenant">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Prix (optionnel)</label>
                            <input type="text" id="landing-price" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500" placeholder="29€/mois">
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Thème de couleur</label>
                            <select id="landing-theme" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500">
                                <option value="blue">Bleu</option>
                                <option value="green">Vert</option>
                                <option value="purple">Violet</option>
                                <option value="red">Rouge</option>
                                <option value="orange">Orange</option>
                            </select>
                        </div>
                        <button type="submit" class="w-full bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white px-4 py-3 rounded-md font-semibold transition-all duration-200">
                            <i class="fas fa-rocket mr-2"></i>Générer la Landing Page
                        </button>
                    </form>
                </div>
                
                <!-- Aperçu de la landing page -->
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <h3 class="text-2xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-eye text-blue-600 mr-3"></i>
                        Aperçu en Temps Réel
                    </h3>
                    <div id="landing-preview" class="landing-preview min-h-96">
                        <div class="text-center p-8 text-gray-500">
                            <i class="fas fa-globe text-4xl mb-4"></i>
                            <p>Remplissez le formulaire pour voir l'aperçu de votre landing page</p>
                        </div>
                    </div>
                    <div class="mt-4 flex space-x-2">
                        <button onclick="exportLanding()" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-colors duration-200">
                            <i class="fas fa-download mr-2"></i>Exporter HTML
                        </button>
                        <button onclick="saveLanding()" class="flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md transition-colors duration-200">
                            <i class="fas fa-save mr-2"></i>Sauvegarder
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Liste des landing pages sauvegardées -->
            <div class="mt-8 bg-white p-6 rounded-lg shadow-md card-hover">
                <h3 class="text-2xl font-semibold mb-6 flex items-center">
                    <i class="fas fa-folder text-purple-600 mr-3"></i>
                    Landing Pages Sauvegardées
                </h3>
                <div id="saved-landings" class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
                    <!-- Les landing pages sauvegardées seront affichées ici -->
                </div>
            </div>
        </div>
    </main>

    <!-- Notifications Toast -->
    <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2">
        <!-- Les notifications apparaîtront ici -->
    </div>

    <script>
        // Variables globales pour la gestion des données
        let currentPage = 'emails';
        
        // Données mock initiales
        const mockData = {
            emails: [
                {
                    id: 1,
                    subject: "Nouvelle offre exclusive",
                    type: "promotion",
                    recipients: ["client1@example.com", "client2@example.com"],
                    content: "Découvrez notre nouvelle offre avec 30% de réduction...",
                    status: "sent",
                    scheduledFor: "2024-01-15T10:00:00",
                    openRate: 45,
                    clickRate: 12
                },
                {
                    id: 2,
                    subject: "Suivi de votre demande",
                    type: "relance",
                    recipients: ["prospect@example.com"],
                    content: "Nous revenons vers vous concernant votre demande...",
                    status: "scheduled",
                    scheduledFor: "2024-01-16T09:00:00",
                    openRate: 0,
                    clickRate: 0
                }
            ],
            offres: [
                {
                    id: 1,
                    titre: "Pack Marketing Digital",
                    description: "Solution complète de marketing digital avec SEO, réseaux sociaux et publicité en ligne.",
                    prix: 1299,
                    priorite: "haute",
                    expiration: "2024-03-15",
                    dateCreation: "2024-01-10"
                },
                {
                    id: 2,
                    titre: "Formation E-commerce",
                    description: "Formation complète pour créer et gérer votre boutique en ligne avec succès.",
                    prix: 599,
                    priorite: "moyenne",
                    expiration: "2024-02-28",
                    dateCreation: "2024-01-12"
                }
            ],
            leads: [
                {
                    id: 1,
                    nom: "Marie Dupont",
                    email: "marie.dupont@example.com",
                    telephone: "0123456789",
                    entreprise: "Tech Solutions",
                    source: "site-web",
                    besoin: "Refonte complète du site web avec optimisation SEO",
                    dateCapture: "2024-01-15"
                },
                {
                    id: 2,
                    nom: "Thomas Martin",
                    email: "thomas.martin@example.com",
                    telephone: "0987654321",
                    entreprise: "StartUp Innovante",
                    source: "reseaux-sociaux",
                    besoin: "Stratégie marketing digital pour lancement produit",
                    dateCapture: "2024-01-14"
                }
            ],
            landings: [
                {
                    id: 1,
                    title: "Formation Marketing Digital",
                    subtitle: "Devenez expert en marketing digital en 30 jours",
                    image: "https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=500&h=300&fit=crop",
                    cta: "Commencer maintenant",
                    price: "297€",
                    theme: "blue",
                    dateCreation: "2024-01-10"
                }
            ]
        };

        // Initialisation de l'application
        document.addEventListener('DOMContentLoaded', function() {
            loadDataFromStorage();
            showPage('emails');
            updateMetrics();
        });

        // Gestion de la navigation
        function showPage(pageId) {
            // Masquer toutes les pages
            const pages = document.querySelectorAll('.page-content');
            pages.forEach(page => page.classList.add('hidden'));
            
            // Afficher la page sélectionnée
            const targetPage = document.getElementById(pageId + '-page');
            if (targetPage) {
                targetPage.classList.remove('hidden');
                targetPage.classList.add('fade-in');
            }
            
            // Mettre à jour la navigation active
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => link.classList.remove('bg-blue-700'));
            
            currentPage = pageId;
            
            // Charger le contenu de la page
            switch(pageId) {
                case 'emails':
                    loadEmails();
                    updateEmailMetrics();
                    break;
                case 'offres':
                    loadOffres();
                    break;
                case 'leads':
                    loadLeads();
                    updateLeadMetrics();
                    break;
                case 'landing':
                    loadSavedLandings();
                    break;
            }
            
            // Fermer le menu mobile
            document.getElementById('mobile-menu').classList.add('hidden');
        }

        // Toggle menu mobile
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        }

        // Gestion du bouton d'actions rapides
        function toggleQuickActions() {
            const menu = document.getElementById('quick-actions-menu');
            menu.classList.toggle('hidden');
        }

        function hideQuickActions() {
            document.getElementById('quick-actions-menu').classList.add('hidden');
        }

        // Gestion du localStorage
        function saveDataToStorage() {
            localStorage.setItem('prospectionData', JSON.stringify(mockData));
        }

        function loadDataFromStorage() {
            const savedData = localStorage.getItem('prospectionData');
            if (savedData) {
                Object.assign(mockData, JSON.parse(savedData));
            }
        }

        // Fonction pour afficher les notifications
        function showToast(message, type = 'success') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            
            const bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500';
            
            toast.className = `${bgColor} text-white px-6 py-3 rounded-lg shadow-lg transform transition-all duration-300 translate-x-full`;
            toast.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'exclamation' : 'info'} mr-2"></i>
                    ${message}
                </div>
            `;
            
            container.appendChild(toast);
            
            // Animation d'entrée
            setTimeout(() => {
                toast.classList.remove('translate-x-full');
            }, 100);
            
            // Suppression automatique
            setTimeout(() => {
                toast.classList.add('translate-x-full');
                setTimeout(() => {
                    container.removeChild(toast);
                }, 300);
            }, 3000);
        }

        // EMAILS AUTOMATISÉS
        function loadEmails() {
            const container = document.getElementById('emails-list');
            container.innerHTML = '';
            
            mockData.emails.sort((a, b) => new Date(b.scheduledFor) - new Date(a.scheduledFor));
            
            mockData.emails.forEach(email => {
                const statusColors = {
                    'sent': 'status-sent',
                    'scheduled': 'status-scheduled',
                    'draft': 'status-draft'
                };
                
                const typeIcons = {
                    'prospection': 'fa-search',
                    'relance': 'fa-redo',
                    'newsletter': 'fa-newspaper',
                    'promotion': 'fa-tags'
                };
                
                const card = document.createElement('div');
                card.className = 'border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200';
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-semibold text-gray-900">${email.subject}</h4>
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${statusColors[email.status]}">
                            ${email.status === 'sent' ? 'Envoyé' : email.status === 'scheduled' ? 'Programmé' : 'Brouillon'}
                        </span>
                    </div>
                    <div class="flex items-center text-sm text-gray-600 mb-2">
                        <i class="fas ${typeIcons[email.type]} mr-2"></i>
                        ${email.type.charAt(0).toUpperCase() + email.type.slice(1)}
                    </div>
                    <p class="text-sm text-gray-600 mb-3">${email.content.substring(0, 100)}...</p>
                    <div class="flex justify-between items-center text-xs text-gray-500">
                        <span>${email.recipients.length} destinataire(s)</span>
                        <span>${new Date(email.scheduledFor).toLocaleDateString('fr-FR')}</span>
                    </div>
                    ${email.status === 'sent' ? `
                        <div class="mt-2 flex space-x-4 text-xs">
                            <span class="text-blue-600">📧 ${email.openRate}% ouverture</span>
                            <span class="text-green-600">🖱️ ${email.clickRate}% clic</span>
                        </div>
                    ` : ''}
                `;
                container.appendChild(card);
            });
        }

        function sendEmail(event) {
            event.preventDefault();
            
            const subject = document.getElementById('email-subject').value;
            const type = document.getElementById('email-type').value;
            const recipients = document.getElementById('email-recipients').value.split(',').map(email => email.trim());
            const content = document.getElementById('email-content').value;
            const schedule = document.getElementById('email-schedule').value;
            
            let scheduledFor = new Date();
            switch(schedule) {
                case '1hour':
                    scheduledFor.setHours(scheduledFor.getHours() + 1);
                    break;
                case 'tomorrow':
                    scheduledFor.setDate(scheduledFor.getDate() + 1);
                    scheduledFor.setHours(9, 0, 0, 0);
                    break;
                case 'custom':
                    // Pour la démo, on programme pour dans 2 jours
                    scheduledFor.setDate(scheduledFor.getDate() + 2);
                    break;
            }
            
            const newEmail = {
                id: Date.now(),
                subject: subject,
                type: type,
                recipients: recipients,
                content: content,
                status: schedule === 'now' ? 'sent' : 'scheduled',
                scheduledFor: scheduledFor.toISOString(),
                openRate: schedule === 'now' ? Math.floor(Math.random() * 50) + 20 : 0,
                clickRate: schedule === 'now' ? Math.floor(Math.random() * 15) + 5 : 0
            };
            
            mockData.emails.unshift(newEmail);
            saveDataToStorage();
            loadEmails();
            updateEmailMetrics();
            
            // Reset form
            event.target.reset();
            
            showToast(schedule === 'now' ? 'Email envoyé avec succès!' : 'Email programmé avec succès!');
        }

        function updateEmailMetrics() {
            const sent = mockData.emails.filter(e => e.status === 'sent').length;
            const scheduled = mockData.emails.filter(e => e.status === 'scheduled').length;
            const avgOpenRate = mockData.emails.filter(e => e.status === 'sent').reduce((acc, e) => acc + e.openRate, 0) / sent || 0;
            const avgClickRate = mockData.emails.filter(e => e.status === 'sent').reduce((acc, e) => acc + e.clickRate, 0) / sent || 0;
            
            document.getElementById('emails-sent').textContent = sent;
            document.getElementById('emails-scheduled').textContent = scheduled;
            document.getElementById('open-rate').textContent = Math.round(avgOpenRate) + '%';
            document.getElementById('click-rate').textContent = Math.round(avgClickRate) + '%';
        }

        // GESTION DES OFFRES
        function loadOffres() {
            const container = document.getElementById('offres-list');
            container.innerHTML = '';
            
            mockData.offres.sort((a, b) => new Date(b.dateCreation) - new Date(a.dateCreation));
            
            mockData.offres.forEach(offre => {
                const priorityClasses = {
                    'haute': 'priority-high',
                    'moyenne': 'priority-medium',
                    'faible': 'priority-low'
                };
                
                const card = document.createElement('div');
                card.className = `bg-white rounded-lg shadow-md p-6 card-hover card-shine ${priorityClasses[offre.priorite]}`;
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-4">
                        <h4 class="text-xl font-semibold text-gray-900">${offre.titre}</h4>
                        <div class="flex space-x-2">
                            <button onclick="pushOffre(${offre.id})" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm">
                                <i class="fas fa-rocket mr-1"></i>Pousser
                            </button>
                            <button onclick="deleteOffre(${offre.id})" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm">
                                <i class="fas fa-trash mr-1"></i>
                            </button>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-4">${offre.description}</p>
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-2xl font-bold text-green-600">${offre.prix}€</span>
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${
                            offre.priorite === 'haute' ? 'bg-red-100 text-red-800' :
                            offre.priorite === 'moyenne' ? 'bg-yellow-100 text-yellow-800' :
                            'bg-green-100 text-green-800'
                        }">
                            ${offre.priorite.charAt(0).toUpperCase() + offre.priorite.slice(1)}
                        </span>
                    </div>
                    <div class="text-sm text-gray-500">
                        <div>Expire le: ${new Date(offre.expiration).toLocaleDateString('fr-FR')}</div>
                        <div>Créée le: ${new Date(offre.dateCreation).toLocaleDateString('fr-FR')}</div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function showAddOffreForm() {
            document.getElementById('add-offre-form').classList.remove('hidden');
        }

        function hideAddOffreForm() {
            document.getElementById('add-offre-form').classList.add('hidden');
            document.getElementById('add-offre-form').querySelector('form').reset();
        }

        function addOffre(event) {
            event.preventDefault();
            
            const titre = document.getElementById('offre-titre').value;
            const prix = parseFloat(document.getElementById('offre-prix').value);
            const description = document.getElementById('offre-description').value;
            const priorite = document.getElementById('offre-priorite').value;
            const expiration = document.getElementById('offre-expiration').value;
            
            const newOffre = {
                id: Date.now(),
                titre: titre,
                description: description,
                prix: prix,
                priorite: priorite,
                expiration: expiration,
                dateCreation: new Date().toISOString().split('T')[0]
            };
            
            mockData.offres.unshift(newOffre);
            saveDataToStorage();
            loadOffres();
            hideAddOffreForm();
            
            showToast('Offre créée avec succès!');
        }

        function pushOffre(id) {
            const offre = mockData.offres.find(o => o.id === id);
            if (offre) {
                showToast(`Offre "${offre.titre}" poussée vers les prospects!`, 'info');
            }
        }

        function deleteOffre(id) {
            if (confirm('Êtes-vous sûr de vouloir supprimer cette offre ?')) {
                mockData.offres = mockData.offres.filter(o => o.id !== id);
                saveDataToStorage();
                loadOffres();
                showToast('Offre supprimée avec succès!');
            }
        }

        // CAPTURE DE LEADS
        function loadLeads() {
            const container = document.getElementById('leads-list');
            const searchTerm = document.getElementById('search-leads')?.value.toLowerCase() || '';
            const sourceFilter = document.getElementById('filter-source')?.value || '';
            
            let filteredLeads = mockData.leads.filter(lead => {
                const matchesSearch = lead.nom.toLowerCase().includes(searchTerm) || 
                                    lead.email.toLowerCase().includes(searchTerm) ||
                                    lead.entreprise.toLowerCase().includes(searchTerm);
                const matchesSource = !sourceFilter || lead.source === sourceFilter;
                return matchesSearch && matchesSource;
            });
            
            container.innerHTML = '';
            
            filteredLeads.sort((a, b) => new Date(b.dateCapture) - new Date(a.dateCapture));
            
            filteredLeads.forEach(lead => {
                const sourceColors = {
                    'site-web': 'bg-blue-100 text-blue-800',
                    'reseaux-sociaux': 'bg-purple-100 text-purple-800',
                    'email': 'bg-green-100 text-green-800',
                    'recommandation': 'bg-yellow-100 text-yellow-800',
                    'evenement': 'bg-red-100 text-red-800'
                };
                
                const card = document.createElement('div');
                card.className = 'border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200';
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-semibold text-gray-900">${lead.nom}</h4>
                        <div class="flex space-x-2">
                            <button onclick="contactLead(${lead.id})" class="bg-green-500 hover:bg-green-600 text-white px-2 py-1 rounded text-xs">
                                <i class="fas fa-phone mr-1"></i>Contacter
                            </button>
                            <button onclick="deleteLead(${lead.id})" class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="text-sm text-gray-600 mb-2">
                        <div>📧 ${lead.email}</div>
                        ${lead.telephone ? `<div>📞 ${lead.telephone}</div>` : ''}
                        ${lead.entreprise ? `<div>🏢 ${lead.entreprise}</div>` : ''}
                    </div>
                    <p class="text-sm text-gray-700 mb-3">${lead.besoin}</p>
                    <div class="flex justify-between items-center">
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${sourceColors[lead.source]}">
                            ${lead.source.replace('-', ' ').charAt(0).toUpperCase() + lead.source.replace('-', ' ').slice(1)}
                        </span>
                        <span class="text-xs text-gray-500">${new Date(lead.dateCapture).toLocaleDateString('fr-FR')}</span>
                    </div>
                `;
                container.appendChild(card);
            });
            
            if (filteredLeads.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">Aucun lead trouvé</p>';
            }
        }

        function addLead(event) {
            event.preventDefault();
            
            const nom = document.getElementById('lead-nom').value;
            const email = document.getElementById('lead-email').value;
            const telephone = document.getElementById('lead-telephone').value;
            const entreprise = document.getElementById('lead-entreprise').value;
            const source = document.getElementById('lead-source').value;
            const besoin = document.getElementById('lead-besoin').value;
            
            const newLead = {
                id: Date.now(),
                nom: nom,
                email: email,
                telephone: telephone,
                entreprise: entreprise,
                source: source,
                besoin: besoin,
                dateCapture: new Date().toISOString().split('T')[0]
            };
            
            mockData.leads.unshift(newLead);
            saveDataToStorage();
            loadLeads();
            updateLeadMetrics();
            
            // Reset form
            event.target.reset();
            
            showToast('Lead ajouté avec succès!');
        }

        function contactLead(id) {
            const lead = mockData.leads.find(l => l.id === id);
            if (lead) {
                showToast(`Contact initié avec ${lead.nom}!`, 'info');
            }
        }

        function deleteLead(id) {
            if (confirm('Êtes-vous sûr de vouloir supprimer ce lead ?')) {
                mockData.leads = mockData.leads.filter(l => l.id !== id);
                saveDataToStorage();
                loadLeads();
                updateLeadMetrics();
                showToast('Lead supprimé avec succès!');
            }
        }

        function updateLeadMetrics() {
            const total = mockData.leads.length;
            const thisMonth = mockData.leads.filter(l => {
                const leadDate = new Date(l.dateCapture);
                const now = new Date();
                return leadDate.getMonth() === now.getMonth() && leadDate.getFullYear() === now.getFullYear();
            }).length;
            
            // Calcul des sources
            const sources = {};
            mockData.leads.forEach(lead => {
                sources[lead.source] = (sources[lead.source] || 0) + 1;
            });
            const topSource = Object.keys(sources).reduce((a, b) => sources[a] > sources[b] ? a : b, '-');
            
            document.getElementById('total-leads').textContent = total;
            document.getElementById('leads-this-month').textContent = thisMonth;
            document.getElementById('conversion-rate').textContent = Math.floor(Math.random() * 20) + 10 + '%';
            document.getElementById('top-source').textContent = topSource.replace('-', ' ').charAt(0).toUpperCase() + topSource.replace('-', ' ').slice(1);
        }

        // Événements de recherche et filtrage pour les leads
        document.addEventListener('DOMContentLoaded', function() {
            // Ajouter les événements après le chargement de la page
            setTimeout(() => {
                const searchInput = document.getElementById('search-leads');
                const filterSelect = document.getElementById('filter-source');
                
                if (searchInput) {
                    searchInput.addEventListener('input', loadLeads);
                }
                if (filterSelect) {
                    filterSelect.addEventListener('change', loadLeads);
                }
            }, 1000);
        });

        // LANDING PAGES
        function generateLanding(event) {
            event.preventDefault();
            
            const title = document.getElementById('landing-title').value;
            const subtitle = document.getElementById('landing-subtitle').value;
            const image = document.getElementById('landing-image').value;
            const cta = document.getElementById('landing-cta').value;
            const price = document.getElementById('landing-price').value;
            const theme = document.getElementById('landing-theme').value;
            
            updateLandingPreview(title, subtitle, image, cta, price, theme);
        }

        function updateLandingPreview(title, subtitle, image, cta, price, theme) {
            const preview = document.getElementById('landing-preview');
            
            const themeClass = `theme-${theme}`;
            
            preview.innerHTML = `
                <div class="${themeClass} text-white text-center py-12 px-6">
                    <h1 class="text-3xl font-bold mb-4">${title || 'Votre Titre'}</h1>
                    ${subtitle ? `<p class="text-lg mb-6 opacity-90">${subtitle}</p>` : ''}
                    ${image ? `<img src="${image}" alt="Image" class="mx-auto mb-6 rounded-lg max-w-xs">` : ''}
                    ${price ? `<div class="text-2xl font-bold mb-6">${price}</div>` : ''}
                    <button class="bg-white text-gray-900 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors duration-200">
                        ${cta || 'Call to Action'}
                    </button>
                </div>
                <div class="p-6 text-center">
                    <p class="text-gray-600">Contenu additionnel de votre landing page...</p>
                </div>
            `;
        }

        function saveLanding() {
            const title = document.getElementById('landing-title').value;
            const subtitle = document.getElementById('landing-subtitle').value;
            const image = document.getElementById('landing-image').value;
            const cta = document.getElementById('landing-cta').value;
            const price = document.getElementById('landing-price').value;
            const theme = document.getElementById('landing-theme').value;
            
            if (!title) {
                showToast('Veuillez remplir au moins le titre', 'error');
                return;
            }
            
            const newLanding = {
                id: Date.now(),
                title: title,
                subtitle: subtitle,
                image: image,
                cta: cta,
                price: price,
                theme: theme,
                dateCreation: new Date().toISOString().split('T')[0]
            };
            
            mockData.landings.push(newLanding);
            saveDataToStorage();
            loadSavedLandings();
            
            showToast('Landing page sauvegardée avec succès!');
        }

        function exportLanding() {
            const title = document.getElementById('landing-title').value;
            const subtitle = document.getElementById('landing-subtitle').value;
            const image = document.getElementById('landing-image').value;
            const cta = document.getElementById('landing-cta').value;
            const price = document.getElementById('landing-price').value;
            const theme = document.getElementById('landing-theme').value;
            
            if (!title) {
                showToast('Veuillez remplir au moins le titre', 'error');
                return;
            }
            
            const html = generateLandingHTML(title, subtitle, image, cta, price, theme);
            
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `landing-${title.toLowerCase().replace(/\s+/g, '-')}.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('Landing page exportée avec succès!');
        }

        function generateLandingHTML(title, subtitle, image, cta, price, theme) {
            const themeColors = {
                'blue': 'from-blue-600 to-blue-800',
                'green': 'from-green-600 to-green-800',
                'purple': 'from-purple-600 to-purple-800',
                'red': 'from-red-600 to-red-800',
                'orange': 'from-orange-600 to-orange-800'
            };
            
            return `<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${title}</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen">
        <div class="bg-gradient-to-br ${themeColors[theme]} text-white text-center py-20 px-6">
            <h1 class="text-5xl font-bold mb-6">${title}</h1>
            ${subtitle ? `<p class="text-xl mb-8 opacity-90 max-w-2xl mx-auto">${subtitle}</p>` : ''}
            ${image ? `<img src="${image}" alt="Image" class="mx-auto mb-8 rounded-lg max-w-md shadow-lg">` : ''}
            ${price ? `<div class="text-3xl font-bold mb-8">${price}</div>` : ''}
            <button class="bg-white text-gray-900 px-12 py-4 rounded-lg font-semibold text-lg hover:bg-gray-100 transition-colors duration-200 shadow-lg">
                ${cta}
            </button>
        </div>
        <div class="py-16 px-6 text-center">
            <h2 class="text-3xl font-bold text-gray-900 mb-8">Pourquoi nous choisir ?</h2>
            <div class="grid md:grid-cols-3 gap-8 max-w-4xl mx-auto">
                <div class="p-6">
                    <div class="text-4xl mb-4">🚀</div>
                    <h3 class="text-xl font-semibold mb-2">Rapide</h3>
                    <p class="text-gray-600">Des résultats visibles rapidement</p>
                </div>
                <div class="p-6">
                    <div class="text-4xl mb-4">💎</div>
                    <h3 class="text-xl font-semibold mb-2">Qualité</h3>
                    <p class="text-gray-600">Excellence garantie</p>
                </div>
                <div class="p-6">
                    <div class="text-4xl mb-4">🎯</div>
                    <h3 class="text-xl font-semibold mb-2">Efficace</h3>
                    <p class="text-gray-600">Solutions sur mesure</p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>`;
        }

        function loadSavedLandings() {
            const container = document.getElementById('saved-landings');
            container.innerHTML = '';
            
            mockData.landings.sort((a, b) => new Date(b.dateCreation) - new Date(a.dateCreation));
            
            mockData.landings.forEach(landing => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-lg shadow-md p-4 card-hover';
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <h4 class="font-semibold text-gray-900">${landing.title}</h4>
                        <div class="flex space-x-1">
                            <button onclick="previewLanding(${landing.id})" class="bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded text-xs">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button onclick="duplicateLanding(${landing.id})" class="bg-green-500 hover:bg-green-600 text-white px-2 py-1 rounded text-xs">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button onclick="deleteSavedLanding(${landing.id})" class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    ${landing.subtitle ? `<p class="text-sm text-gray-600 mb-2">${landing.subtitle}</p>` : ''}
                    <div class="flex justify-between items-center text-xs text-gray-500">
                        <span class="px-2 py-1 rounded-full bg-${landing.theme}-100 text-${landing.theme}-800">
                            ${landing.theme.charAt(0).toUpperCase() + landing.theme.slice(1)}
                        </span>
                        <span>${new Date(landing.dateCreation).toLocaleDateString('fr-FR')}</span>
                    </div>
                `;
                container.appendChild(card);
            });
            
            if (mockData.landings.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8 col-span-full">Aucune landing page sauvegardée</p>';
            }
        }

        function previewLanding(id) {
            const landing = mockData.landings.find(l => l.id === id);
            if (landing) {
                updateLandingPreview(landing.title, landing.subtitle, landing.image, landing.cta, landing.price, landing.theme);
                showToast('Aperçu chargé!', 'info');
            }
        }

        function duplicateLanding(id) {
            const landing = mockData.landings.find(l => l.id === id);
            if (landing) {
                document.getElementById('landing-title').value = landing.title + ' (Copie)';
                document.getElementById('landing-subtitle').value = landing.subtitle || '';
                document.getElementById('landing-image').value = landing.image || '';
                document.getElementById('landing-cta').value = landing.cta || '';
                document.getElementById('landing-price').value = landing.price || '';
                document.getElementById('landing-theme').value = landing.theme || 'blue';
                
                updateLandingPreview(landing.title + ' (Copie)', landing.subtitle, landing.image, landing.cta, landing.price, landing.theme);
                showToast('Landing page dupliquée dans le formulaire!', 'info');
            }
        }

        function deleteSavedLanding(id) {
            if (confirm('Êtes-vous sûr de vouloir supprimer cette landing page ?')) {
                mockData.landings = mockData.landings.filter(l => l.id !== id);
                saveDataToStorage();
                loadSavedLandings();
                showToast('Landing page supprimée avec succès!');
            }
        }

        // Mise à jour en temps réel de l'aperçu
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                const inputs = ['landing-title', 'landing-subtitle', 'landing-image', 'landing-cta', 'landing-price', 'landing-theme'];
                inputs.forEach(inputId => {
                    const input = document.getElementById(inputId);
                    if (input) {
                        input.addEventListener('input', function() {
                            const title = document.getElementById('landing-title').value;
                            const subtitle = document.getElementById('landing-subtitle').value;
                            const image = document.getElementById('landing-image').value;
                            const cta = document.getElementById('landing-cta').value;
                            const price = document.getElementById('landing-price').value;
                            const theme = document.getElementById('landing-theme').value;
                            
                            updateLandingPreview(title, subtitle, image, cta, price, theme);
                        });
                    }
                });
            }, 1000);
        });

        // Fonction générale pour mettre à jour les métriques
        function updateMetrics() {
            updateEmailMetrics();
            updateLeadMetrics();
        }

        // Fermer les menus en cliquant à l'extérieur
        document.addEventListener('click', function(event) {
            const quickActions = document.getElementById('quick-actions-menu');
            const quickButton = event.target.closest('button[onclick="toggleQuickActions()"]');
            
            if (quickActions && !quickActions.contains(event.target) && !quickButton) {
                hideQuickActions();
            }
        });
    </script>
</body>
</html>