<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prospection Marketing - Entreprise</title>
    <!-- TailwindCSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome pour les icônes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Styles personnalisés pour les animations et effets marketing */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .marketing-gradient {
            background: linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 50%, #45b7d1 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse-icon {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .card-shine {
            position: relative;
            overflow: hidden;
        }
        
        .card-shine::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .card-shine:hover::before {
            left: 100%;
        }
        
        .priority-high { border-left: 4px solid #ef4444; }
        .priority-medium { border-left: 4px solid #f59e0b; }
        .priority-low { border-left: 4px solid #10b981; }
        
        .status-sent { background-color: #d1fae5; color: #065f46; }
        .status-scheduled { background-color: #dbeafe; color: #1e40af; }
        .status-draft { background-color: #fef3c7; color: #92400e; }
        
        .source-website { background-color: #dbeafe; color: #1e40af; }
        .source-social { background-color: #fce7f3; color: #be185d; }
        .source-email { background-color: #d1fae5; color: #065f46; }
        .source-referral { background-color: #fef3c7; color: #92400e; }
        .source-event { background-color: #e0e7ff; color: #3730a3; }
        
        .hidden { display: none !important; }
        
        /* Styles pour les métriques animées */
        .metric-counter {
            font-size: 2rem;
            font-weight: bold;
            color: #1f2937;
        }
        
        /* Styles pour les notifications toast */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 16px;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        /* Styles pour le bouton flottant */
        .floating-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            cursor: pointer;
            z-index: 100;
            transition: all 0.3s ease;
        }
        
        .floating-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        }
        
        .floating-menu {
            position: fixed;
            bottom: 90px;
            right: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 8px;
            z-index: 99;
            transform: scale(0);
            transition: transform 0.2s ease;
        }
        
        .floating-menu.show {
            transform: scale(1);
        }
        
        .floating-menu button {
            display: block;
            width: 100%;
            text-align: left;
            padding: 12px 16px;
            border: none;
            background: none;
            border-radius: 8px;
            transition: background-color 0.2s ease;
            white-space: nowrap;
        }
        
        .floating-menu button:hover {
            background-color: #f3f4f6;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Navigation Bar -->
    <nav class="marketing-gradient text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo/Titre -->
                <div class="flex items-center">
                    <i class="fas fa-rocket text-2xl mr-3 pulse-icon"></i>
                    <h1 class="text-xl font-bold">Prospection Marketing</h1>
                </div>
                
                <!-- Menu Desktop -->
                <div class="hidden md:flex space-x-8">
                    <button onclick="showPage('emails')" class="nav-link hover:text-blue-200 transition-colors duration-200 px-3 py-2 rounded-md">
                        <i class="fas fa-envelope mr-2"></i>Emails
                    </button>
                    <button onclick="showPage('offres')" class="nav-link hover:text-blue-200 transition-colors duration-200 px-3 py-2 rounded-md">
                        <i class="fas fa-tags mr-2"></i>Offres
                    </button>
                    <button onclick="showPage('leads')" class="nav-link hover:text-blue-200 transition-colors duration-200 px-3 py-2 rounded-md">
                        <i class="fas fa-users mr-2"></i>Leads
                    </button>
                    <button onclick="showPage('landing')" class="nav-link hover:text-blue-200 transition-colors duration-200 px-3 py-2 rounded-md">
                        <i class="fas fa-globe mr-2"></i>Landing Pages
                    </button>
                </div>
                
                <!-- Menu Mobile -->
                <div class="md:hidden">
                    <button onclick="toggleMobileMenu()" class="text-white hover:text-blue-200">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
            
            <!-- Menu Mobile Dropdown -->
            <div id="mobile-menu" class="hidden md:hidden pb-4">
                <button onclick="showPage('emails')" class="block w-full text-left px-3 py-2 hover:bg-blue-700 rounded-md">
                    <i class="fas fa-envelope mr-2"></i>Emails
                </button>
                <button onclick="showPage('offres')" class="block w-full text-left px-3 py-2 hover:bg-blue-700 rounded-md">
                    <i class="fas fa-tags mr-2"></i>Offres
                </button>
                <button onclick="showPage('leads')" class="block w-full text-left px-3 py-2 hover:bg-blue-700 rounded-md">
                    <i class="fas fa-users mr-2"></i>Leads
                </button>
                <button onclick="showPage('landing')" class="block w-full text-left px-3 py-2 hover:bg-blue-700 rounded-md">
                    <i class="fas fa-globe mr-2"></i>Landing Pages
                </button>
            </div>
        </div>
    </nav>

    <!-- Contenu Principal -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Page Emails Automatisés -->
        <div id="emails-page" class="page-content">
            <!-- Hero Section -->
            <div class="text-center mb-12">
                <div class="w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-blue-400 to-purple-600 rounded-full flex items-center justify-center">
                    <i class="fas fa-envelope text-3xl text-white pulse-icon"></i>
                </div>
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Emails Automatisés</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                    Créez et programmez vos campagnes d'emails pour une prospection efficace et automatisée.
                </p>
            </div>

            <!-- Métriques des emails -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                            <i class="fas fa-paper-plane text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Emails Envoyés</p>
                            <p id="emails-sent" class="metric-counter">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-yellow-100 text-yellow-600">
                            <i class="fas fa-clock text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Programmés</p>
                            <p id="emails-scheduled" class="metric-counter">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-green-100 text-green-600">
                            <i class="fas fa-eye text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Taux d'Ouverture</p>
                            <p id="open-rate" class="metric-counter">0%</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-purple-100 text-purple-600">
                            <i class="fas fa-mouse-pointer text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Taux de Clic</p>
                            <p id="click-rate" class="metric-counter">0%</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Formulaire d'envoi d'email -->
                <div class="bg-white p-6 rounded-lg shadow-md card-hover card-shine">
                    <h3 class="text-2xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-plus-circle text-blue-600 mr-3"></i>
                        Nouvelle Campagne Email
                    </h3>
                    <form onsubmit="sendEmail(event)">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Type de campagne</label>
                            <select id="email-type" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Sélectionner...</option>
                                <option value="prospection">Prospection</option>
                                <option value="relance">Relance</option>
                                <option value="newsletter">Newsletter</option>
                                <option value="promotion">Promotion</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Destinataires</label>
                            <textarea id="email-recipients" required rows="3" placeholder="email1@example.com, email2@example.com..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Objet</label>
                            <input type="text" id="email-subject" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Contenu</label>
                            <textarea id="email-content" required rows="6" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Programmation</label>
                            <select id="email-schedule" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="now">Envoyer maintenant</option>
                                <option value="1hour">Dans 1 heure</option>
                                <option value="tomorrow">Demain matin</option>
                                <option value="custom">Programmer...</option>
                            </select>
                        </div>
                        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-colors duration-200">
                            <i class="fas fa-paper-plane mr-2"></i>Envoyer la Campagne
                        </button>
                    </form>
                </div>
                
                <!-- Liste des emails programmés -->
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <h3 class="text-2xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-list text-green-600 mr-3"></i>
                        Campagnes Récentes
                    </h3>
                    <div id="emails-list" class="space-y-4">
                        <!-- Les emails seront ajoutés ici dynamiquement -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Page Gestion des Offres -->
        <div id="offres-page" class="page-content hidden">
            <!-- Hero Section -->
            <div class="text-center mb-12">
                <div class="w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-green-400 to-blue-600 rounded-full flex items-center justify-center">
                    <i class="fas fa-tags text-3xl text-white pulse-icon"></i>
                </div>
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Gestion des Offres</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                    Créez et gérez vos offres commerciales pour maximiser vos conversions.
                </p>
            </div>

            <div class="flex justify-between items-center mb-8">
                <h3 class="text-2xl font-bold text-gray-900">
                    <i class="fas fa-fire text-orange-500 mr-3"></i>Offres à Pousser
                </h3>
                <button onclick="showAddOffreForm()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                    <i class="fas fa-plus mr-2"></i>Nouvelle Offre
                </button>
            </div>
            
            <!-- Formulaire d'ajout d'offre -->
            <div id="add-offre-form" class="hidden bg-white p-6 rounded-lg shadow-md mb-8 card-hover">
                <h4 class="text-xl font-semibold mb-4">Créer une nouvelle offre</h4>
                <form onsubmit="addOffre(event)">
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Titre de l'offre</label>
                            <input type="text" id="offre-titre" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Prix</label>
                            <input type="number" id="offre-prix" required step="0.01" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea id="offre-description" required rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"></textarea>
                    </div>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Date d'expiration</label>
                            <input type="date" id="offre-expiration" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Priorité</label>
                            <select id="offre-priorite" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                                <option value="haute">Haute</option>
                                <option value="moyenne">Moyenne</option>
                                <option value="faible">Faible</option>
                            </select>
                        </div>
                    </div>
                    <div class="flex space-x-4">
                        <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md">
                            <i class="fas fa-save mr-2"></i>Créer l'Offre
                        </button>
                        <button type="button" onclick="hideAddOffreForm()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md">
                            <i class="fas fa-times mr-2"></i>Annuler
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- Grille des offres -->
            <div id="offres-list" class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                <!-- Les offres seront ajoutées ici dynamiquement -->
            </div>
        </div>

        <!-- Page Capture de Leads -->
        <div id="leads-page" class="page-content hidden">
            <!-- Hero Section -->
            <div class="text-center mb-12">
                <div class="w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-purple-400 to-pink-600 rounded-full flex items-center justify-center">
                    <i class="fas fa-users text-3xl text-white pulse-icon"></i>
                </div>
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Capture de Leads</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                    Capturez et gérez vos prospects pour développer votre pipeline commercial.
                </p>
            </div>

            <!-- Statistiques des leads -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                            <i class="fas fa-users text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Total Leads</p>
                            <p id="leads-total" class="metric-counter">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-green-100 text-green-600">
                            <i class="fas fa-calendar text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Ce Mois</p>
                            <p id="leads-month" class="metric-counter">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-purple-100 text-purple-600">
                            <i class="fas fa-chart-line text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Conversion</p>
                            <p id="conversion-rate" class="metric-counter">0%</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-orange-100 text-orange-600">
                            <i class="fas fa-star text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Top Source</p>
                            <p id="top-source" class="text-sm font-bold text-gray-900">Site Web</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Formulaire de capture de lead -->
                <div class="bg-white p-6 rounded-lg shadow-md card-hover card-shine">
                    <h3 class="text-2xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-user-plus text-purple-600 mr-3"></i>
                        Nouveau Lead
                    </h3>
                    <form onsubmit="addLead(event)">
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nom complet</label>
                                <input type="text" id="lead-nom" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                <input type="email" id="lead-email" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                        </div>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Téléphone</label>
                                <input type="tel" id="lead-telephone" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Entreprise</label>
                                <input type="text" id="lead-entreprise" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Source</label>
                            <select id="lead-source" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <option value="">Sélectionner...</option>
                                <option value="website">Site Web</option>
                                <option value="social">Réseaux Sociaux</option>
                                <option value="email">Email Marketing</option>
                                <option value="referral">Recommandation</option>
                                <option value="event">Événement</option>
                            </select>
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Besoin/Intérêt</label>
                            <textarea id="lead-besoin" required rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"></textarea>
                        </div>
                        <button type="submit" class="w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md transition-colors duration-200">
                            <i class="fas fa-save mr-2"></i>Enregistrer le Lead
                        </button>
                    </form>
                </div>
                
                <!-- Liste des leads avec recherche -->
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-semibold flex items-center">
                            <i class="fas fa-list text-green-600 mr-3"></i>
                            Leads Récents
                        </h3>
                    </div>
                    
                    <!-- Barre de recherche et filtres -->
                    <div class="mb-4 space-y-2">
                        <input type="text" id="leads-search" placeholder="Rechercher un lead..." 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                               oninput="filterLeads()">
                        <select id="leads-filter" onchange="filterLeads()" 
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <option value="">Toutes les sources</option>
                            <option value="website">Site Web</option>
                            <option value="social">Réseaux Sociaux</option>
                            <option value="email">Email Marketing</option>
                            <option value="referral">Recommandation</option>
                            <option value="event">Événement</option>
                        </select>
                    </div>
                    
                    <div id="leads-list" class="space-y-4 max-h-96 overflow-y-auto">
                        <!-- Les leads seront ajoutés ici dynamiquement -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Page Landing Pages -->
        <div id="landing-page" class="page-content hidden">
            <!-- Hero Section -->
            <div class="text-center mb-12">
                <div class="w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-orange-400 to-red-600 rounded-full flex items-center justify-center">
                    <i class="fas fa-globe text-3xl text-white pulse-icon"></i>
                </div>
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Générateur de Landing Pages</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                    Créez rapidement des landing pages attractives pour vos campagnes marketing.
                </p>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Formulaire de création -->
                <div class="bg-white p-6 rounded-lg shadow-md card-hover card-shine">
                    <h3 class="text-2xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-magic text-orange-600 mr-3"></i>
                        Créer une Landing Page
                    </h3>
                    <form onsubmit="generateLanding(event)">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Titre principal</label>
                            <input type="text" id="landing-titre" required value="Découvrez Notre Solution Révolutionnaire" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                                   oninput="updatePreview()">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Sous-titre</label>
                            <input type="text" id="landing-soustitre" required value="Transformez votre business avec notre technologie innovante" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                                   oninput="updatePreview()">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                            <textarea id="landing-description" required rows="4" 
                                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                                      oninput="updatePreview()">Rejoignez plus de 10 000 entreprises qui font déjà confiance à notre solution pour optimiser leurs performances et augmenter leur chiffre d'affaires.</textarea>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">URL de l'image</label>
                            <input type="url" id="landing-image" value="https://images.unsplash.com/photo-1551434678-e076c223a692?w=600&h=400&fit=crop" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                                   oninput="updatePreview()">
                        </div>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Texte du bouton</label>
                                <input type="text" id="landing-cta" required value="Commencer Maintenant" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                                       oninput="updatePreview()">
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Prix (optionnel)</label>
                                <input type="text" id="landing-prix" value="29€/mois" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                                       oninput="updatePreview()">
                            </div>
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Thème de couleur</label>
                            <select id="landing-theme" onchange="updatePreview()" 
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500">
                                <option value="blue">Bleu</option>
                                <option value="green">Vert</option>
                                <option value="purple">Violet</option>
                                <option value="red">Rouge</option>
                                <option value="orange">Orange</option>
                            </select>
                        </div>
                        <div class="flex space-x-4">
                            <button type="submit" class="flex-1 bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-md transition-colors duration-200">
                                <i class="fas fa-save mr-2"></i>Sauvegarder
                            </button>
                            <button type="button" onclick="exportLanding()" class="flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md transition-colors duration-200">
                                <i class="fas fa-download mr-2"></i>Exporter HTML
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Aperçu en temps réel -->
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <h3 class="text-2xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-eye text-blue-600 mr-3"></i>
                        Aperçu en Temps Réel
                    </h3>
                    <div id="landing-preview" class="border border-gray-200 rounded-lg overflow-hidden">
                        <!-- L'aperçu sera généré ici -->
                    </div>
                </div>
            </div>
            
            <!-- Liste des landing pages sauvegardées -->
            <div class="mt-8 bg-white p-6 rounded-lg shadow-md card-hover">
                <h3 class="text-2xl font-semibold mb-6 flex items-center">
                    <i class="fas fa-folder text-purple-600 mr-3"></i>
                    Landing Pages Sauvegardées
                </h3>
                <div id="landing-list" class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
                    <!-- Les landing pages seront ajoutées ici -->
                </div>
            </div>
        </div>
    </main>

    <!-- Bouton d'actions rapides flottant -->
    <button class="floating-btn" onclick="toggleFloatingMenu()">
        <i class="fas fa-plus text-xl"></i>
    </button>
    
    <!-- Menu flottant -->
    <div id="floating-menu" class="floating-menu">
        <button onclick="showPage('emails'); toggleFloatingMenu();">
            <i class="fas fa-envelope mr-2 text-blue-600"></i>Nouvel Email
        </button>
        <button onclick="showPage('offres'); showAddOffreForm(); toggleFloatingMenu();">
            <i class="fas fa-tags mr-2 text-green-600"></i>Nouvelle Offre
        </button>
        <button onclick="showPage('leads'); toggleFloatingMenu();">
            <i class="fas fa-user-plus mr-2 text-purple-600"></i>Nouveau Lead
        </button>
        <button onclick="showPage('landing'); toggleFloatingMenu();">
            <i class="fas fa-globe mr-2 text-orange-600"></i>Landing Page
        </button>
    </div>

    <script>
        // Variables globales pour la gestion des données
        let currentPage = 'emails';
        let floatingMenuOpen = false;
        
        // Données mock initiales
        const mockData = {
            emails: [
                {
                    id: 1,
                    type: "prospection",
                    subject: "Découvrez notre nouvelle solution",
                    recipients: ["prospect1@example.com", "prospect2@example.com"],
                    content: "Bonjour, nous avons le plaisir de vous présenter...",
                    status: "sent",
                    date: "2024-01-15",
                    openRate: 45,
                    clickRate: 12
                },
                {
                    id: 2,
                    type: "relance",
                    subject: "Relance - Votre projet nous intéresse",
                    recipients: ["client@example.com"],
                    content: "Suite à notre dernier échange...",
                    status: "scheduled",
                    date: "2024-01-16",
                    openRate: 0,
                    clickRate: 0
                }
            ],
            offres: [
                {
                    id: 1,
                    titre: "Pack Starter - 50% de réduction",
                    description: "Offre spéciale pour les nouveaux clients avec tous les outils essentiels inclus.",
                    prix: 299,
                    expiration: "2024-02-15",
                    priorite: "haute",
                    date: "2024-01-10"
                },
                {
                    id: 2,
                    titre: "Formation Gratuite - Webinar Exclusif",
                    description: "Participez à notre webinar gratuit sur les meilleures pratiques marketing.",
                    prix: 0,
                    expiration: "2024-01-25",
                    priorite: "moyenne",
                    date: "2024-01-12"
                }
            ],
            leads: [
                {
                    id: 1,
                    nom: "Marie Dupont",
                    email: "marie.dupont@entreprise.com",
                    telephone: "0123456789",
                    entreprise: "TechCorp",
                    source: "website",
                    besoin: "Solution CRM pour équipe de 20 personnes",
                    date: "2024-01-15"
                },
                {
                    id: 2,
                    nom: "Thomas Martin",
                    email: "t.martin@startup.fr",
                    telephone: "0987654321",
                    entreprise: "StartupInnovante",
                    source: "social",
                    besoin: "Automatisation des processus marketing",
                    date: "2024-01-14"
                },
                {
                    id: 3,
                    nom: "Sophie Leroy",
                    email: "sophie@consulting.com",
                    telephone: "0147258369",
                    entreprise: "Consulting Plus",
                    source: "referral",
                    besoin: "Formation équipe sur outils digitaux",
                    date: "2024-01-13"
                }
            ],
            landingPages: [
                {
                    id: 1,
                    titre: "Solution CRM Révolutionnaire",
                    soustitre: "Gérez vos clients comme jamais auparavant",
                    description: "Notre CRM nouvelle génération vous aide à augmenter vos ventes de 40%.",
                    image: "https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop",
                    cta: "Essayer Gratuitement",
                    prix: "49€/mois",
                    theme: "blue",
                    date: "2024-01-10"
                }
            ]
        };

        // Initialisation de l'application
        document.addEventListener('DOMContentLoaded', function() {
            loadDataFromStorage();
            showPage('emails');
            updateMetrics();
            updatePreview();
        });

        // Gestion de la navigation
        function showPage(pageId) {
            // Masquer toutes les pages
            const pages = document.querySelectorAll('.page-content');
            pages.forEach(page => page.classList.add('hidden'));
            
            // Afficher la page sélectionnée
            const targetPage = document.getElementById(pageId + '-page');
            if (targetPage) {
                targetPage.classList.remove('hidden');
                targetPage.classList.add('fade-in');
            }
            
            // Mettre à jour la navigation active
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => link.classList.remove('bg-blue-700'));
            
            currentPage = pageId;
            
            // Charger le contenu de la page
            switch(pageId) {
                case 'emails':
                    loadEmails();
                    updateMetrics();
                    break;
                case 'offres':
                    loadOffres();
                    break;
                case 'leads':
                    loadLeads();
                    updateLeadsMetrics();
                    break;
                case 'landing':
                    loadLandingPages();
                    updatePreview();
                    break;
            }
            
            // Fermer le menu mobile
            document.getElementById('mobile-menu').classList.add('hidden');
        }

        // Toggle menu mobile
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        }

        // Toggle menu flottant
        function toggleFloatingMenu() {
            const menu = document.getElementById('floating-menu');
            floatingMenuOpen = !floatingMenuOpen;
            if (floatingMenuOpen) {
                menu.classList.add('show');
            } else {
                menu.classList.remove('show');
            }
        }

        // Gestion du localStorage
        function saveDataToStorage() {
            localStorage.setItem('prospectionData', JSON.stringify(mockData));
        }

        function loadDataFromStorage() {
            const savedData = localStorage.getItem('prospectionData');
            if (savedData) {
                Object.assign(mockData, JSON.parse(savedData));
            }
        }

        // Fonction pour afficher les notifications
        function showNotification(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type === 'success' ? 'bg-green-100 border-green-500 text-green-700' : 'bg-red-100 border-red-500 text-red-700'} border-l-4`;
            toast.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'} mr-2"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }

        // EMAILS AUTOMATISÉS
        function loadEmails() {
            const container = document.getElementById('emails-list');
            container.innerHTML = '';
            
            mockData.emails.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            mockData.emails.forEach(email => {
                const statusColors = {
                    'sent': 'status-sent',
                    'scheduled': 'status-scheduled',
                    'draft': 'status-draft'
                };
                
                const statusTexts = {
                    'sent': 'Envoyé',
                    'scheduled': 'Programmé',
                    'draft': 'Brouillon'
                };
                
                const typeColors = {
                    'prospection': 'text-blue-600',
                    'relance': 'text-orange-600',
                    'newsletter': 'text-green-600',
                    'promotion': 'text-purple-600'
                };
                
                const card = document.createElement('div');
                card.className = 'border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200';
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-semibold text-gray-900">${email.subject}</h4>
                        <button onclick="deleteEmail(${email.id})" class="text-red-500 hover:text-red-700">
                            <i class="fas fa-trash text-sm"></i>
                        </button>
                    </div>
                    <div class="flex items-center space-x-2 mb-2">
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${statusColors[email.status]}">
                            ${statusTexts[email.status]}
                        </span>
                        <span class="text-xs ${typeColors[email.type]} font-medium">
                            ${email.type.charAt(0).toUpperCase() + email.type.slice(1)}
                        </span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">${email.content.substring(0, 100)}...</p>
                    <div class="flex justify-between items-center text-xs text-gray-500">
                        <span>${email.recipients.length} destinataire(s)</span>
                        <span>${new Date(email.date).toLocaleDateString('fr-FR')}</span>
                    </div>
                    ${email.status === 'sent' ? `
                        <div class="mt-2 flex space-x-4 text-xs">
                            <span class="text-green-600">📧 ${email.openRate}% ouverture</span>
                            <span class="text-blue-600">🖱️ ${email.clickRate}% clic</span>
                        </div>
                    ` : ''}
                `;
                container.appendChild(card);
            });
        }

        function sendEmail(event) {
            event.preventDefault();
            
            const type = document.getElementById('email-type').value;
            const recipients = document.getElementById('email-recipients').value.split(',').map(email => email.trim());
            const subject = document.getElementById('email-subject').value;
            const content = document.getElementById('email-content').value;
            const schedule = document.getElementById('email-schedule').value;
            
            const newEmail = {
                id: Date.now(),
                type: type,
                subject: subject,
                recipients: recipients,
                content: content,
                status: schedule === 'now' ? 'sent' : 'scheduled',
                date: new Date().toISOString().split('T')[0],
                openRate: schedule === 'now' ? Math.floor(Math.random() * 60) + 20 : 0,
                clickRate: schedule === 'now' ? Math.floor(Math.random() * 20) + 5 : 0
            };
            
            mockData.emails.unshift(newEmail);
            saveDataToStorage();
            loadEmails();
            updateMetrics();
            
            // Reset form
            event.target.reset();
            
            showNotification(`Email ${schedule === 'now' ? 'envoyé' : 'programmé'} avec succès !`);
        }

        function deleteEmail(id) {
            if (confirm('Êtes-vous sûr de vouloir supprimer cet email ?')) {
                mockData.emails = mockData.emails.filter(e => e.id !== id);
                saveDataToStorage();
                loadEmails();
                updateMetrics();
                showNotification('Email supprimé avec succès !');
            }
        }

        function updateMetrics() {
            const sentEmails = mockData.emails.filter(e => e.status === 'sent');
            const scheduledEmails = mockData.emails.filter(e => e.status === 'scheduled');
            
            document.getElementById('emails-sent').textContent = sentEmails.length;
            document.getElementById('emails-scheduled').textContent = scheduledEmails.length;
            
            if (sentEmails.length > 0) {
                const avgOpenRate = sentEmails.reduce((sum, email) => sum + email.openRate, 0) / sentEmails.length;
                const avgClickRate = sentEmails.reduce((sum, email) => sum + email.clickRate, 0) / sentEmails.length;
                
                document.getElementById('open-rate').textContent = Math.round(avgOpenRate) + '%';
                document.getElementById('click-rate').textContent = Math.round(avgClickRate) + '%';
            }
        }

        // GESTION DES OFFRES
        function loadOffres() {
            const container = document.getElementById('offres-list');
            container.innerHTML = '';
            
            mockData.offres.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            mockData.offres.forEach(offre => {
                const priorityClasses = {
                    'haute': 'priority-high',
                    'moyenne': 'priority-medium',
                    'faible': 'priority-low'
                };
                
                const priorityColors = {
                    'haute': 'bg-red-100 text-red-800',
                    'moyenne': 'bg-yellow-100 text-yellow-800',
                    'faible': 'bg-green-100 text-green-800'
                };
                
                const card = document.createElement('div');
                card.className = `bg-white p-6 rounded-lg shadow-md card-hover card-shine ${priorityClasses[offre.priorite]}`;
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-4">
                        <h4 class="text-xl font-semibold text-gray-900">${offre.titre}</h4>
                        <button onclick="deleteOffre(${offre.id})" class="text-red-500 hover:text-red-700">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <p class="text-gray-600 mb-4">${offre.description}</p>
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-2xl font-bold text-green-600">
                            ${offre.prix === 0 ? 'Gratuit' : offre.prix + '€'}
                        </span>
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${priorityColors[offre.priorite]}">
                            ${offre.priorite.charAt(0).toUpperCase() + offre.priorite.slice(1)}
                        </span>
                    </div>
                    <div class="flex justify-between items-center text-sm text-gray-500 mb-4">
                        <span>Expire le ${new Date(offre.expiration).toLocaleDateString('fr-FR')}</span>
                        <span>Créé le ${new Date(offre.date).toLocaleDateString('fr-FR')}</span>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="pushOffre(${offre.id})" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm transition-colors duration-200">
                            <i class="fas fa-rocket mr-2"></i>Pousser
                        </button>
                        <button onclick="editOffre(${offre.id})" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md text-sm transition-colors duration-200">
                            <i class="fas fa-edit mr-2"></i>Modifier
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function showAddOffreForm() {
            document.getElementById('add-offre-form').classList.remove('hidden');
        }

        function hideAddOffreForm() {
            document.getElementById('add-offre-form').classList.add('hidden');
            document.getElementById('add-offre-form').querySelector('form').reset();
        }

        function addOffre(event) {
            event.preventDefault();
            
            const titre = document.getElementById('offre-titre').value;
            const prix = parseFloat(document.getElementById('offre-prix').value);
            const description = document.getElementById('offre-description').value;
            const expiration = document.getElementById('offre-expiration').value;
            const priorite = document.getElementById('offre-priorite').value;
            
            const newOffre = {
                id: Date.now(),
                titre: titre,
                description: description,
                prix: prix,
                expiration: expiration,
                priorite: priorite,
                date: new Date().toISOString().split('T')[0]
            };
            
            mockData.offres.unshift(newOffre);
            saveDataToStorage();
            loadOffres();
            hideAddOffreForm();
            
            showNotification('Offre créée avec succès !');
        }

        function deleteOffre(id) {
            if (confirm('Êtes-vous sûr de vouloir supprimer cette offre ?')) {
                mockData.offres = mockData.offres.filter(o => o.id !== id);
                saveDataToStorage();
                loadOffres();
                showNotification('Offre supprimée avec succès !');
            }
        }

        function pushOffre(id) {
            const offre = mockData.offres.find(o => o.id === id);
            if (offre) {
                showNotification(`Offre "${offre.titre}" poussée vers tous les canaux !`);
            }
        }

        function editOffre(id) {
            const offre = mockData.offres.find(o => o.id === id);
            if (offre) {
                document.getElementById('offre-titre').value = offre.titre;
                document.getElementById('offre-prix').value = offre.prix;
                document.getElementById('offre-description').value = offre.description;
                document.getElementById('offre-expiration').value = offre.expiration;
                document.getElementById('offre-priorite').value = offre.priorite;
                
                showAddOffreForm();
                
                // Supprimer l'ancienne offre lors de la sauvegarde
                mockData.offres = mockData.offres.filter(o => o.id !== id);
            }
        }

        // CAPTURE DE LEADS
        function loadLeads() {
            const container = document.getElementById('leads-list');
            container.innerHTML = '';
            
            const filteredLeads = filterLeadsData();
            
            filteredLeads.forEach(lead => {
                const sourceClasses = {
                    'website': 'source-website',
                    'social': 'source-social',
                    'email': 'source-email',
                    'referral': 'source-referral',
                    'event': 'source-event'
                };
                
                const sourceTexts = {
                    'website': 'Site Web',
                    'social': 'Réseaux Sociaux',
                    'email': 'Email Marketing',
                    'referral': 'Recommandation',
                    'event': 'Événement'
                };
                
                const card = document.createElement('div');
                card.className = 'border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200';
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-semibold text-gray-900">${lead.nom}</h4>
                        <button onclick="deleteLead(${lead.id})" class="text-red-500 hover:text-red-700">
                            <i class="fas fa-trash text-sm"></i>
                        </button>
                    </div>
                    <div class="space-y-1 mb-3">
                        <p class="text-sm text-gray-600">📧 ${lead.email}</p>
                        ${lead.telephone ? `<p class="text-sm text-gray-600">📞 ${lead.telephone}</p>` : ''}
                        ${lead.entreprise ? `<p class="text-sm text-gray-600">🏢 ${lead.entreprise}</p>` : ''}
                    </div>
                    <div class="flex items-center justify-between mb-2">
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${sourceClasses[lead.source]}">
                            ${sourceTexts[lead.source]}
                        </span>
                        <span class="text-xs text-gray-500">${new Date(lead.date).toLocaleDateString('fr-FR')}</span>
                    </div>
                    <p class="text-sm text-gray-700 mb-3">${lead.besoin}</p>
                    <button onclick="contactLead(${lead.id})" class="w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md text-sm transition-colors duration-200">
                        <i class="fas fa-phone mr-2"></i>Contacter
                    </button>
                `;
                container.appendChild(card);
            });
            
            if (filteredLeads.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center">Aucun lead trouvé</p>';
            }
        }

        function filterLeadsData() {
            const searchTerm = document.getElementById('leads-search')?.value.toLowerCase() || '';
            const sourceFilter = document.getElementById('leads-filter')?.value || '';
            
            return mockData.leads.filter(lead => {
                const matchesSearch = lead.nom.toLowerCase().includes(searchTerm) || 
                                    lead.email.toLowerCase().includes(searchTerm) ||
                                    lead.entreprise?.toLowerCase().includes(searchTerm) ||
                                    lead.besoin.toLowerCase().includes(searchTerm);
                
                const matchesSource = !sourceFilter || lead.source === sourceFilter;
                
                return matchesSearch && matchesSource;
            });
        }

        function filterLeads() {
            loadLeads();
        }

        function addLead(event) {
            event.preventDefault();
            
            const nom = document.getElementById('lead-nom').value;
            const email = document.getElementById('lead-email').value;
            const telephone = document.getElementById('lead-telephone').value;
            const entreprise = document.getElementById('lead-entreprise').value;
            const source = document.getElementById('lead-source').value;
            const besoin = document.getElementById('lead-besoin').value;
            
            const newLead = {
                id: Date.now(),
                nom: nom,
                email: email,
                telephone: telephone,
                entreprise: entreprise,
                source: source,
                besoin: besoin,
                date: new Date().toISOString().split('T')[0]
            };
            
            mockData.leads.unshift(newLead);
            saveDataToStorage();
            loadLeads();
            updateLeadsMetrics();
            
            // Reset form
            event.target.reset();
            
            showNotification('Lead enregistré avec succès !');
        }

        function deleteLead(id) {
            if (confirm('Êtes-vous sûr de vouloir supprimer ce lead ?')) {
                mockData.leads = mockData.leads.filter(l => l.id !== id);
                saveDataToStorage();
                loadLeads();
                updateLeadsMetrics();
                showNotification('Lead supprimé avec succès !');
            }
        }

        function contactLead(id) {
            const lead = mockData.leads.find(l => l.id === id);
            if (lead) {
                showNotification(`Contact initié avec ${lead.nom} !`);
            }
        }

        function updateLeadsMetrics() {
            const totalLeads = mockData.leads.length;
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            
            const leadsThisMonth = mockData.leads.filter(lead => {
                const leadDate = new Date(lead.date);
                return leadDate.getMonth() === currentMonth && leadDate.getFullYear() === currentYear;
            }).length;
            
            // Calculer la source la plus populaire
            const sourceCounts = {};
            mockData.leads.forEach(lead => {
                sourceCounts[lead.source] = (sourceCounts[lead.source] || 0) + 1;
            });
            
            const topSource = Object.keys(sourceCounts).reduce((a, b) => 
                sourceCounts[a] > sourceCounts[b] ? a : b, 'website'
            );
            
            const sourceTexts = {
                'website': 'Site Web',
                'social': 'Réseaux Sociaux',
                'email': 'Email Marketing',
                'referral': 'Recommandation',
                'event': 'Événement'
            };
            
            document.getElementById('leads-total').textContent = totalLeads;
            document.getElementById('leads-month').textContent = leadsThisMonth;
            document.getElementById('conversion-rate').textContent = Math.floor(Math.random() * 30) + 15 + '%';
            document.getElementById('top-source').textContent = sourceTexts[topSource] || 'Site Web';
        }

        // LANDING PAGES
        function loadLandingPages() {
            const container = document.getElementById('landing-list');
            container.innerHTML = '';
            
            mockData.landingPages.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            mockData.landingPages.forEach(landing => {
                const themeColors = {
                    'blue': 'bg-blue-100 text-blue-800',
                    'green': 'bg-green-100 text-green-800',
                    'purple': 'bg-purple-100 text-purple-800',
                    'red': 'bg-red-100 text-red-800',
                    'orange': 'bg-orange-100 text-orange-800'
                };
                
                const card = document.createElement('div');
                card.className = 'bg-white p-4 rounded-lg shadow-md card-hover';
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-semibold text-gray-900">${landing.titre}</h4>
                        <button onclick="deleteLanding(${landing.id})" class="text-red-500 hover:text-red-700">
                            <i class="fas fa-trash text-sm"></i>
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">${landing.soustitre}</p>
                    <div class="flex items-center justify-between mb-3">
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${themeColors[landing.theme]}">
                            ${landing.theme.charAt(0).toUpperCase() + landing.theme.slice(1)}
                        </span>
                        <span class="text-xs text-gray-500">${new Date(landing.date).toLocaleDateString('fr-FR')}</span>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="previewLanding(${landing.id})" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-md text-sm">
                            <i class="fas fa-eye mr-1"></i>Aperçu
                        </button>
                        <button onclick="duplicateLanding(${landing.id})" class="flex-1 bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-md text-sm">
                            <i class="fas fa-copy mr-1"></i>Dupliquer
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function updatePreview() {
            const titre = document.getElementById('landing-titre')?.value || 'Titre par défaut';
            const soustitre = document.getElementById('landing-soustitre')?.value || 'Sous-titre par défaut';
            const description = document.getElementById('landing-description')?.value || 'Description par défaut';
            const image = document.getElementById('landing-image')?.value || 'https://images.unsplash.com/photo-1551434678-e076c223a692?w=600&h=400&fit=crop';
            const cta = document.getElementById('landing-cta')?.value || 'Call to Action';
            const prix = document.getElementById('landing-prix')?.value || '';
            const theme = document.getElementById('landing-theme')?.value || 'blue';
            
            const themeClasses = {
                'blue': 'from-blue-500 to-blue-700',
                'green': 'from-green-500 to-green-700',
                'purple': 'from-purple-500 to-purple-700',
                'red': 'from-red-500 to-red-700',
                'orange': 'from-orange-500 to-orange-700'
            };
            
            const preview = document.getElementById('landing-preview');
            if (preview) {
                preview.innerHTML = `
                    <div class="bg-white">
                        <div class="bg-gradient-to-r ${themeClasses[theme]} text-white p-8 text-center">
                            <h1 class="text-3xl font-bold mb-4">${titre}</h1>
                            <p class="text-xl mb-6">${soustitre}</p>
                            ${prix ? `<div class="text-2xl font-bold mb-4">À partir de ${prix}</div>` : ''}
                            <button class="bg-white text-gray-900 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors duration-200">
                                ${cta}
                            </button>
                        </div>
                        <div class="p-8">
                            <div class="grid md:grid-cols-2 gap-8 items-center">
                                <div>
                                    <p class="text-gray-700 leading-relaxed">${description}</p>
                                </div>
                                <div>
                                    <img src="${image}" alt="Preview" class="w-full h-48 object-cover rounded-lg" onerror="this.src='https://images.unsplash.com/photo-1551434678-e076c223a692?w=600&h=400&fit=crop'">
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        function generateLanding(event) {
            event.preventDefault();
            
            const titre = document.getElementById('landing-titre').value;
            const soustitre = document.getElementById('landing-soustitre').value;
            const description = document.getElementById('landing-description').value;
            const image = document.getElementById('landing-image').value;
            const cta = document.getElementById('landing-cta').value;
            const prix = document.getElementById('landing-prix').value;
            const theme = document.getElementById('landing-theme').value;
            
            const newLanding = {
                id: Date.now(),
                titre: titre,
                soustitre: soustitre,
                description: description,
                image: image,
                cta: cta,
                prix: prix,
                theme: theme,
                date: new Date().toISOString().split('T')[0]
            };
            
            mockData.landingPages.unshift(newLanding);
            saveDataToStorage();
            loadLandingPages();
            
            showNotification('Landing page sauvegardée avec succès !');
        }

        function exportLanding() {
            const titre = document.getElementById('landing-titre').value;
            const soustitre = document.getElementById('landing-soustitre').value;
            const description = document.getElementById('landing-description').value;
            const image = document.getElementById('landing-image').value;
            const cta = document.getElementById('landing-cta').value;
            const prix = document.getElementById('landing-prix').value;
            const theme = document.getElementById('landing-theme').value;
            
            const themeClasses = {
                'blue': 'from-blue-500 to-blue-700',
                'green': 'from-green-500 to-green-700',
                'purple': 'from-purple-500 to-purple-700',
                'red': 'from-red-500 to-red-700',
                'orange': 'from-orange-500 to-orange-700'
            };
            
            const html = `<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${titre}</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <div class="bg-white">
        <div class="bg-gradient-to-r ${themeClasses[theme]} text-white p-8 text-center">
            <h1 class="text-4xl font-bold mb-4">${titre}</h1>
            <p class="text-xl mb-6">${soustitre}</p>
            ${prix ? `<div class="text-2xl font-bold mb-4">À partir de ${prix}</div>` : ''}
            <button class="bg-white text-gray-900 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors duration-200">
                ${cta}
            </button>
        </div>
        <div class="p-8">
            <div class="max-w-6xl mx-auto grid md:grid-cols-2 gap-8 items-center">
                <div>
                    <p class="text-gray-700 leading-relaxed text-lg">${description}</p>
                </div>
                <div>
                    <img src="${image}" alt="${titre}" class="w-full h-64 object-cover rounded-lg">
                </div>
            </div>
        </div>
    </div>
</body>
</html>`;
            
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `landing-${titre.toLowerCase().replace(/\s+/g, '-')}.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Landing page exportée avec succès !');
        }

        function deleteLanding(id) {
            if (confirm('Êtes-vous sûr de vouloir supprimer cette landing page ?')) {
                mockData.landingPages = mockData.landingPages.filter(l => l.id !== id);
                saveDataToStorage();
                loadLandingPages();
                showNotification('Landing page supprimée avec succès !');
            }
        }

        function previewLanding(id) {
            const landing = mockData.landingPages.find(l => l.id === id);
            if (landing) {
                // Remplir le formulaire avec les données de la landing page
                document.getElementById('landing-titre').value = landing.titre;
                document.getElementById('landing-soustitre').value = landing.soustitre;
                document.getElementById('landing-description').value = landing.description;
                document.getElementById('landing-image').value = landing.image;
                document.getElementById('landing-cta').value = landing.cta;
                document.getElementById('landing-prix').value = landing.prix;
                document.getElementById('landing-theme').value = landing.theme;
                
                updatePreview();
                showNotification('Aperçu mis à jour !');
            }
        }

        function duplicateLanding(id) {
            const landing = mockData.landingPages.find(l => l.id === id);
            if (landing) {
                const duplicate = {
                    ...landing,
                    id: Date.now(),
                    titre: landing.titre + ' (Copie)',
                    date: new Date().toISOString().split('T')[0]
                };
                
                mockData.landingPages.unshift(duplicate);
                saveDataToStorage();
                loadLandingPages();
                showNotification('Landing page dupliquée avec succès !');
            }
        }

        // Fermer le menu flottant en cliquant ailleurs
        document.addEventListener('click', function(event) {
            const floatingBtn = document.querySelector('.floating-btn');
            const floatingMenu = document.getElementById('floating-menu');
            
            if (!floatingBtn.contains(event.target) && !floatingMenu.contains(event.target)) {
                floatingMenu.classList.remove('show');
                floatingMenuOpen = false;
            }
        });
    </script>
</body>
</html>